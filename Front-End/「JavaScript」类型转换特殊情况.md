1. [原文链接](https://segmentfault.com/a/1190000011853970)
2. [JS中的隐式转换](https://segmentfault.com/a/1190000011854066)

### 特例

```javascript
String([])       // ""
Number([])       // 0
Boolean([])      // true
Number(true)     // 1
Number(false)    // 0
```

```javascript
[] == 0      // true
![] == 0     // true
[] == ''     // true
!![] == ''   // false
'' == true   // false
```

### 相等运算符 `==`

- 如果一个值是`null`, 另一个是`undefined`，则它们相等
- 如果一个值是`数字`，另一个是`字符串`，先将字符串转换为数字，然后使用转换后的值进行比较。

- 如果其中一个值是`true`，则将其转换为`1`再进行比较。如果其中一个值是`false`，则将其转换为`0`再进行比较。
- 如果一个值是**对象**，另一个值是**数字**或**字符串**，则将对象转换为原始值，然后再进行比较。
  - 对象通过`toString()`方法或者`valueOf()`方法转换为原始值。日期类只能使用`toString()`转换。
  - **原始值**：不可变更的值，包括 undefined、null、布尔值、数字、和字符串
  - `toString()`：返回一个反映这个对象的字符串。
  - `valueOf()`：一个对象那个如果存在任意原始值，它就默认将对象转换为表示它的原始值。
- **其他不同类型**之间的比较均**不相等**

### 对象的转换

- 对象 -> 字符串
  - 如果对象具有`toString()`方法，则调用这个方法。如果她返回一个**原始值**，JavaScript将这个值转换为字符串（如果本身不是字符串的话），并返回这个字符串结果。
  - 如果对象没有`toString()`方法，或者这个方法并不返回一个**原始值**，那么JavaScript会调用`valueOf()`方法。如果存在这个方法，则JavaScript调用它。如果返回值是**原始值**，JavaScript将这个值转换为字符串（如果本身不是字符串的话），并返回这个字符串结果。
  - 否则，JavaScript无法从`toString()`或者`valueOf()`获得一个原始值，因此这时它将抛出一个**类型错误异常**。
- 对象 -> 数字
  - 如果对象具有`valueOf()`方法，后者返回一个**原始值**，则JavaScript将这个原始值转换为数字（如果需要的话）并返回这个数字。
  - 否则，如果对象具有`toString()`方法，后者返回一个**原始值**，则JavaScript将其转化并返回。
  - 否则，JavaScript抛出一个**类型错误异常**。

### 问题

```javascript
[] == true	// false
```

- `true`转为 1 -> 规则3
- `[]`转为 0 -> 特例1-2
- `0 == 1` -> false

```javascript
![] == []	// true
```

- `![]`转为 false -> 特例1-3
- false 转为 0 -> 规则3
- `[]` 转为 0 -> 特例1-2

```javascript
'1' == []	// false
```

*个人想法*

- `[]`转为 ''
- '1' == '' -> false

### 为什么空数组会被转换为数字0，为什么具有单个元素的数组同样会转换成一个数字？

数组继承了默认的`valueOf()`方法，这个方法返回一个对象而不是一个原始值，因此，数组到数字的转换则调用`toString()`方法。空数组转换为空字符串，空字符串转换为数字**0**。
含有一个元素的数组转换为字符串的结果和这个元素转换字符串的结果一样。
如果数组只包含一个数字元素，这个数字转换为字符串，在转换回数字。

### 对象、原始值和运算符

JavaScript中的`+`运算符可以进行**数学加法**和**字符串连接**操作。如果它的其中一个操作数是对象，则JavaScript将使用特殊的方法**将对象转换为原始值**，而不是使用其他算术运算符的方法执行对象到数字的转换，`==`相等运算符与此**类似**。如果将对象和一个原始值比较，则转换将会遵照对象到此原始值的转换方式进行。